<!DOCTYPE html>
<html lang="en" ng-app="smartRestaurantApp">
<head>
    <meta charset="UTF-8">
    <title>Smart restaurant!</title>
    <!-- JQUERY -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- BOOTSTRAP CSS !-->
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap-grid.css">
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap-reboot.css">
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <!-- FONT AWESOME -->
    <link rel="stylesheet" type="text/css"
          href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- ANGULAR JS -->
    <script src="angular/angular.min.js"></script>
    <!-- CUSTOM -->
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/app.js"></script>
    <script src="js/services/offerService.js"></script>
    <script src="js/services/orderService.js"></script>
    <script src="js/controllers/offerController.js"></script>
    <script src="js/controllers/orderController.js"></script>
</head>
<body>

<!-- Header -->
<div class="header text-center">
    <h1>SMART RESTAURANT</h1>
</div>
<div class="container-fluid">
    <div ng-controller="MenuListController">
        <!-- Modal -->
        <div id="unconfirmedSelectionModal" class="modal">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Nepotvrzený předchozí výběr</h4>
                    </div>
                    <div class="modal-body">
                        <p>Chystáte se vybrat další jídlo, ale nepotvrdili jste váš předchozí výběr jídla. Co si přejete
                            udělat?</p>
                        <h4>Předchozí výběr</h4>
                        <div class="table-responsive ">
                            <table class="table table-hover">
                                <tr>
                                    <th>Ks</th>
                                    <th>Název</th>
                                    <th>Cena</th>
                                </tr>
                                <tr ng-repeat="selectedDish in selectedDishes track by $index">
                                    <td>{{selectedDish.count}}</td>
                                    <td>{{selectedDish.name}}</a></td>
                                    <td>{{selectedDish.price}} Kč</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="continuePrevSelectionBtn" type="button" class="btn btn-default">Pokračovat v
                            předchozím výběru
                        </button>
                        <button id="cancelPrevSelectionBtn" type="button" class="btn btn-default">Zrušit předchozí
                            výběr
                        </button>
                        <button id="confirmPrevSelectionBtn" type="button" class="btn btn-primary">Potvrdit předchozí
                            výběr
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Table of dishes -->
        <div class="content-absolute half-of-parent">
            <h1 class="text-center">Nabídka</h1>
            <div class="table-responsive">
                <table class="table table-hover">
                    <tr>
                        <th>Název</th>
                        <th>Cena</th>
                        <th class="text-center">Akce</th>
                    </tr>
                    <tbody ng-repeat="(category, dishes) in items">
                    <tr>
                        <th colspan="3" class="text-center btn-primary">{{category}}</th>
                    </tr>
                    <tr ng-repeat="dish in dishes">
                        <td>{{dish.name}}</td>
                        <td>{{dish.price}} Kč</td>
                        <td class="text-center">
                            <button class="btn btn-primary" ng-click="startSelectingMainDish(category, dish)">Vybrat
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Additional info -->
        <div class="half-of-parent right-side" ng-if="detailItem != undefined && detailItem != null">
            <div class="dish-info">
                <img class="dish-image" src="img/rizek.jpg" alt="A tasty image of a {{detailItem.name}}"/>
                <h1>{{detailItem.name}}</h1>
                <p><strong>Kategorie:</strong> {{detailItem.category.name}}</p>
                <p><strong>Popis:</strong>
                    <span ng-if="detailItem.description != null">{{detailItem.description}}</span>
                    <span ng-if="detailItem.description == null">
                            Hodor, hodor. Hodor. Hodor, hodor hodor - hodor; hodor hodor hodor hodor. Hodor. Hodor hodor HODOR! Hodor hodor, hodor. Hodor HODOR hodor, hodor hodor... Hodor hodor hodor?! Hodor. Hodor hodor hodor, hodor. Hodor hodor, hodor, hodor hodor. Hodor hodor - hodor, hodor. Hodor hodor - hodor. Hodor hodor - HODOR hodor, hodor hodor - hodor, hodor. Hodor hodor. Hodor! Hodor hodor, hodor - hodor hodor hodor hodor. Hodor.
                        </span>
                </p>
            </div>
            <!-- Combinations -->
            <h3>Toto jídlo lze kombinovat s těmito položkami</h3>
            <div class="right-bottom-quarter">
                <div class="table-responsive ">
                    <table class="table table-hover">
                        <tr>
                            <th>Název</th>
                            <th>Cena</th>
                            <th class="text-center">Akce</th>
                        </tr>
                        <tr ng-repeat="sideDish in sideDishes">
                            <td>{{sideDish.name}}</a></td>
                            <td>{{sideDish.price}} Kč</td>
                            <td class="text-center">
                                <button class="btn btn-success" ng-click="addSideDish(sideDish)">
                                    <i class="fa fa-plus" aria-hidden="true"></i>
                                </button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <button class="btn btn-lg btn-success" ng-click="confirmSelection()">Potvrdit</button>
        </div>

        <div class="actualSelection">
            <div class="dish-info">
                <h3>Aktuální výběr</h3>
                <div class="table-responsive ">
                    <table class="table table-hover">
                        <tr>
                            <th>Ks</th>
                            <th>Název</th>
                            <th>Cena</th>
                            <th>Akce</th>
                        </tr>
                        <tr ng-repeat="selectedDish in selectedDishes track by $index">
                            <td>{{selectedDish.count}}</td>
                            <td>
                                <b ng-if="selectedDish.main">{{selectedDish.name}}</b>
                                <span ng-if="!selectedDish.main">{{selectedDish.name}}</span>
                            </td>
                            <td>{{selectedDish.price}} Kč</td>
                            <td>
                                <button class="btn btn-danger" ng-click="decreaseAmountOfDish(selectedDish)">
                                    <i class="fa fa-minus" aria-hidden="true"></i>
                                </button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <!-- Order -->
        <div class="order" ng-controller="OrderController">
            <button id="basketButton" class="btn btn-success right-top-corner" ng-click="showOrderDialog()">
                <i class="fa fa-sticky-note-o" aria-hidden="true"></i> Vaše objednávka [{{order.length}}]
            </button>
            <div id="orderModal" class="modal">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Aktuální objednávka</h4>
                        </div>
                        <div class="modal-body">
                            <div class="dish-info">
                                <div class="table-responsive ">
                                    <table class="table table-hover" id="actualChoiceTable">
                                        <tr>
                                            <th>Ks</th>
                                            <th>Název</th>
                                            <th>Cena</th>
                                        </tr>
                                        <tbody ng-repeat="orderItem in order" class="">
                                        <tr ng-repeat="dish in orderItem track by $index">
                                            <td>{{dish.count}}</td>
                                            <td>{{dish.name}}</a></td>
                                            <td>{{dish.price}} Kč</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" ng-click="closeOrderDialog()">Zavřít</button>
                            <button type="button" class="btn btn-primary">Odeslat objednávku</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</body>
</html>